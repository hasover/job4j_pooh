# job4j_pooh

[![Build Status](https://app.travis-ci.com/hasover/job4j_pooh.svg?branch=main)](https://app.travis-ci.com/hasover/job4j_pooh)

* [Описание](#описание)
* [Технологии](#технологии)
* [Функционал](#функционал)
* [Контакты](#контакты)

## Описание
Проект представляет собой аналог асинхронной очереди. Приложение запускает Socket и ждет клиентов.
Клиенты могут быть двух типов: отправители (publisher), получатели (subscriber).
В качестве клиента используется cURL, в качестве протокола HTTP.
Pooh будет иметь два режима: queue, topic.
### Queue
Отправитель посылает запрос на добавление данных с указанием очереди (weather) и значением параметра (temperature=18). Сообщение помещается в конец очереди. Если очереди нет в сервисе, то нужно создать новую и поместить в нее сообщение.
Получатель посылает запрос на получение данных с указанием очереди. Сообщение забирается из начала очереди и удаляется.
Если в очередь приходят несколько получателей, то они поочередно получают сообщения из очереди.
Каждое сообщение в очереди может быть получено только одним получателем.
### Topic
Отправитель посылает запрос на добавление данных с указанием топика (weather) и значением параметра (temperature=18). Сообщение помещается в конец каждой индивидуальной очереди получателей. Если топика нет в сервисе, то данные игнорируются.
Получатель посылает запрос на получение данных с указанием топика. Если топик отсутствует, то создается новый. А если топик присутствует, то сообщение забирается из начала индивидуальной очереди получателя и удаляется.
Когда получатель впервые получает данные из топика – для него создается индивидуальная пустая очередь. Все последующие сообщения от отправителей с данными для этого топика помещаются в эту очередь тоже.
Таким образом в режиме "topic" для каждого потребителя своя будет уникальная очередь с данными, в отличие от режима "queue", где для все потребители получают данные из одной и той же очереди.

## Технологии
* Java14
* Maven
* Curl
* Travis CI

## Функционал

### 1. POST запрос в режиме queue
POST запрос должен добавить элементы в очередь weather.

curl -X POST -d "temperature=18" http://localhost:9000/queue/weather

queue указывает на режим «очередь».
weather указывает на имя очереди. 

### 2. GET запрос в режиме queue

GET запрос должен получить элементы из очереди weather.

curl -X GET http://localhost:9000/queue/weather

Ответ: temperature=18

### 3. GET запрос в режиме topic

curl -X GET http://localhost:9000/topic/weather/1

1 - ID получателя.

### 4. POST запрос в режиме topic

curl -X POST -d "temperature=18" http://localhost:9000/topic/weather

## Сборка приложения
- Для сборки приложения на вашем компьютере должны быть установлены:
    - JDK 14+
    - Maven
    - Curl
- Выполните команду `mvn package`
- Далее `java -jar target/job4j_pooh-1.0-SNAPSHOT.jar`

## Контакты
telegram: @hasover

